<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>method Map</title>
    <style>
        div {
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }
        .root {
            width: 50px;
            height: 50px;
            background-color: red;
            margin: 10px;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <script>
        Array.prototype.map2 = function(callback, thisArg) {
            if(this == null) {
                throw new Error("Can't iterate over undefined or null")
            }

            let context = this
            
            let obj = Object(this)

            if(arguments.length > 1) {
                context = thisArg
            }

            if(typeof callback !== 'function') {
                throw new Error("Callback is not a function")
            }

            let len = obj.length

            let result = []

            let i = 0

            while(i < len) {
                if(i in obj) {
                    result[i] = callback.call(context, this[i], i, 0)
                }
                i++
            }
            return result
        }
        let arr = [1,2,3,4,5,6,7,8,9,10]

        let addDivAndLogEl = (el) => {
            let listItem = document.createElement('div')
            listItem.classList.add("root")
            listItem.innerHTML = el * 10
            root.appendChild(listItem)
            
            listItem.addEventListener('click', () => {
                console.log(el)})
        }

        arr.map2(addDivAndLogEl)



        
    </script>
</body>
</html>